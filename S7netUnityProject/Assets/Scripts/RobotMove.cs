using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class RobotMove : MonoBehaviour
{
    public GameObject J1;
    public GameObject J2;
    public GameObject J3;
    public GameObject J4;
    public GameObject J5;
    public GameObject J6;

    private int green, blue, red, i;

    // Use this for initialization
    void Start()
    {
       // i = 0;
       // blue = 1;
       // TakeCube();

        // ModifyGrab(1);
    }

    // Update is called once per frame
    void Update()
    {

    }

    public void GrabRed()
	{
        i = 0;
        red = 1;
        TakeCube();
    }
    public void GrabGreen()
    {
        i = 0;
        green = 1;
        TakeCube();
    }
    public void GrabBlue()
    {
        i = 0;
        blue = 1;
        TakeCube();
    }

    public void TakeCube()
	{
        float[] J1data = { 0f, -0.000610229368450749f, -0.00451036234770721f, -0.0140221026871368f, -0.0305187134555142f, -0.0545435721260956f, -0.0859287256616929f, -0.123913445599747f, -0.167262783137404f, -0.214386124216585f, -0.263455744609066f, -0.312525365001547f, -0.359648706080728f, -0.402998043618384f, -0.440982763556439f, -0.472367917092036f, -0.496392775762618f, -0.512889386530995f, -0.522401126870424f, -0.526301259849680f, -0.526911489218132f };
        float[] J2data = { -1.57079632679490f, -1.56981704362479f, -1.56355819279716f, -1.54829395329244f, -1.52182054161395f, -1.48326595709753f, -1.43289972722119f, -1.37194265291476f, -1.30237655386948f, -1.22675401384771f, -1.14800812599252f, -1.06926223813732f, -0.993639698115552f, -0.924073599070277f, -0.863116524763841f, -0.812750294887505f, -0.774195710371084f, -0.747722298692593f, -0.732458059187874f, -0.726199208360245f, -0.725219925190137f };
        float[] J3data = { 0f, 0.00423358956235252f, 0.00312915502676633f, 0.00972811710606627f, 0.0211729741998021f, 0.0378407054109356f, 0.0596147899258240f, 0.0859674570003208f, 0.116041935945877f, 0.148734706115640f, 0.182777746890557f, 0.216820787665474f, 0.249513557835237f, 0.279588036780792f, 0.305940703855289f, 0.327714788370178f, 0.344382519581312f, 0.355827376675047f, 0.362426338754347f, 0.365132134824878f, 0.365555493781113f };
        float[] J4data = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
        float[] J5data = { -1.57079632679490f, -1.57024040258102f, -1.56668734782393f, -1.55802207039850f, -1.54299351581374f, -1.52110666250845f, -1.49251451714699f, -1.45791010991504f, -1.41841848981531f, -1.37548871996329f, -1.33078587288300f, -1.28608302580271f, -1.24315325595069f, -1.20366163585096f, -1.16905722861901f, -1.14046508325755f, -1.11857822995226f, -1.10354967536750f, -1.09488439794208f, -1.09133134318498f, -1.09077541897111f };
        float[] J6data = { 1.57079632679490f, 1.56958737766738f, 1.56186067258524f, 1.54301659398291f, 1.51033451700245f, 1.46273793540511f, 1.40055958748288f, 1.32530658196999f, 1.23942552395453f, 1.14606764078992f, 1.04885390800651f, 0.951640175223107f, 0.858282292058500f, 0.772401234043036f, 0.697148228530150f, 0.634969880607914f, 0.587373299010578f, 0.554691222030119f, 0.535847143427787f, 0.528120438345649f, 0.526911489218131f };
        ModifyGrab(1);
        StartCoroutine(RobotGo(J1data, J2data, J3data, J4data, J5data, J6data));
    }

    public void PutRed()
	{
        float[] J1data = { 0f,0.000166773051768585f,0.00123266255640720f,0.00383218012480011f,0.00834063262466181f,0.0149065227734333f,0.0234839497311783f,0.0338650096934794f,0.0457121964843344f,0.0585908021490522f,0.0720013175471496f,0.0854118329452470f,0.0982904386099649f,0.110137625400820f,0.120518685363121f,0.129096112320866f,0.135662002469637f,0.140170454969499f,0.142769972537892f,0.143835862042530f,0.144002635094299f };
        float[] J2data = { -1.57079632679490f, -1.56996421284145f, -1.56464595836190f, -1.55167566839035f, -1.52918074973424f, -1.49642024825260f, -1.45362318613446f, -1.40182689917715f, -1.34271537406465f, -1.27845758564591f, -1.21154583421323f, -1.14463408278054f, -1.08037629436181f, -1.02126476924930f,-0.969468482291995f,-0.926671420173857f,-0.893910918692218f,-0.871416000036101f,-0.858445710064557f,-0.853127455585002f,-0.852295341631558f };
        float[] J3data = { 0, -1.30553245211794e-05f, - 9.64952642428888e-05f,-0.000299990643706043f,-0.000652921227213565f,-0.00116691210136014f,-0.00183837005756195f,-0.00265101997458645f,-0.00357844120108208f,-0.00458660393810805f,-0.00563640562166406f,-0.00668620730522008f,-0.00769437004224604f,-0.00862179126874167f,-0.00943444118576617f,-0.0101058991419680f,-0.0106198900161146f,-0.0109728205996221f,-0.0111763159790852f,-0.0112597559188069f,-0.0112728112433281f };
        float[] J4data = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
        float[] J5data = { -1.57079632679490f, -1.56995115751693f, -1.56454946309765f, -1.55137567774664f, -1.52852782850700f, -1.49525333615120f, -1.45178481607684f, -1.39917587920248f, -1.33913693286346f, -1.27387098170766f, -1.20590942859139f, -1.13794787547512f, -1.07268192431933f, -1.01264297798030f,-0.960034041105943f,-0.916565521031582f,-0.883291028675781f,-0.860443179436145f,-0.847269394085132f,-0.841867699665851f,-0.841022530387887f };
        float[] J6data = { 1.57079632679490f,1.56881037524716f,1.55611764768113f,1.52516231117097f,1.47147517092227f,1.39328784050559f,1.29114691209001f,1.16752812667677f,1.02645054433279f,0.873090714424284f,0.713396845850299f,0.553702977276314f,0.400343147367807f,0.259265565023833f,0.135646779610592f,0.0335058511950130f,-0.0446814792216781f,-0.0983686194703726f,-0.129323955980528f,-0.142016683546558f,-0.144002635094298f };
        StartCoroutine(RobotGo(J1data, J2data, J3data, J4data, J5data, J6data));
    }

    public void PutGreen()
    {
        float[] J1data = { 0f, 0.000510683492988333f,0.00377459315702548f,0.0117346964101188f,0.0255402378101537f,0.0456459544124083f,0.0719112911270694f,0.103699616076747f,0.139977435953991f,0.179413611378805f,0.220478572256161f,0.261543533133517f,0.300979708558330f,0.337257528435574f,0.369045853385252f,0.395311190099913f,0.415416906702168f,0.429222448102203f,0.437182551355296f,0.440446461019333f,0.440957144512321f };
        float[] J2data = { -1.57079632679490f, -1.56981049855846f, -1.56350981652713f, -1.54814355805284f, -1.52149321059058f, -1.48268094543548f, -1.43197809145996f, -1.37061360885081f, -1.30058256284638f, -1.22445459747362f, -1.14518240928526f, -1.06591022109691f,-0.989782255724148f,-0.919751209719716f,-0.858386727110575f,-0.807683873135050f,-0.768871607979948f,-0.742221260517685f,-0.726855002043397f,-0.720554320012065f,-0.719568491775632f };
        float[] J3data = { 0f,0.000284401228729915f,0.00210208269222068f,0.00653508900058880f,0.0142234380296053f,0.0254203742624890f,0.0400476221316995f,0.0577506393607306f,0.0779538703059032f,0.0999159992981589f,0.122785203984853f,0.145654408671546f,0.167616537663802f,0.187819768608974f,0.205522785838006f,0.220150033707216f,0.231346969940100f,0.239035318969117f,0.243468325277484f,0.245286006740975f,0.245570407969705f };
        float[] J4data = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
        float[] J5data = { -1.57079632679490f, -1.57009489978719f, -1.56561189921930f, -1.55467864705326f, -1.53571664861980f, -1.50810131969729f, -1.47202571359058f, -1.42836424820999f, -1.37853643315019f, -1.32437059676910f, -1.26796761326681f, -1.21156462976453f, -1.15739879338344f, -1.10757097832364f, -1.06390951294305f, -1.02783390683634f, -1.00021857791383f,-0.981256579480373f,-0.970323327314334f,-0.965840326746443f,-0.965138899738733f };
        float[] J6data = { 1.57079632679490f,1.56846646480594f,1.55357571708051f,1.51725979488565f,1.45427556573678f,1.36254840886661f,1.24271957069412f,1.09769352029350f,0.932185304863133f,0.752267905194531f,0.564919591141287f,0.377571277088044f,0.197653877419442f,0.0321456619890776f,-0.112880388411540f,-0.232709226584035f,-0.324436383454209f,-0.387420612603076f,-0.423736534797929f,-0.438627282523363f,-0.440957144512323f };
        StartCoroutine(RobotGo(J1data, J2data, J3data, J4data, J5data, J6data));
    }

    public void PutBlue()
    {
        float[] J1data = { 0f,0.000697920236975736f,0.00515850813039378f,0.0160370997140798f,0.0349042980037860f,0.0623815646244502f,0.0982768114374554f,0.141719992167888f,0.191298694031799f,0.245193729363461f,0.301314727242627f,0.357435725121794f,0.411330760453455f,0.460909462317366f,0.504352643047799f,0.540247889860805f,0.567725156481469f,0.586592354771176f,0.597470946354860f,0.601931534248279f,0.602629454485255f };
        float[] J2data = { -1.57079632679490f, -1.57021044774838f, -1.56646594394485f, -1.55733375587113f, -1.54149541853853f, -1.51842923716739f, -1.48829646287142f, -1.45182746834218f, -1.41020792353350f, -1.36496497134592f, -1.31785340331110f, -1.27074183527628f, -1.22549888308869f, -1.18387933828001f, -1.14741034375077f, -1.11727756945480f, -1.09421138808366f, -1.07837305075107f, -1.06924086267734f, -1.06549635887382f, -1.06491047982730f };
        float[] J3data = { 0f,-0.000460654163365002f,-0.00340481350320943f,-0.0105851017927245f,-0.0230381773488189f,-0.0411742287141546f,-0.0648664703391815f,-0.0935406382641731f,-0.126264485801262f,-0.161837279216474f,-0.198879293411766f,-0.235921307607057f,-0.271494101022269f,-0.304217948559358f,-0.332892116484350f,-0.356584358109377f,-0.374720409474713f,-0.387173485030807f,-0.394353773320322f,-0.397297932660166f,-0.397758586823532f };
        float[] J4data = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
        float[] J5data = { -1.57079632679490f, -1.56974979358500f, -1.56306113044155f, -1.54674865407812f, -1.51845724118910f, -1.47725500845215f, -1.42342999253052f, -1.35828683007553f, -1.28394343772890f, -1.20312769212516f, -1.11897410989407f, -1.03482052766298f,-0.954004782059238f,-0.879661389712604f,-0.814518227257614f,-0.760693211335989f,-0.719490978599032f,-0.691199565710015f,-0.674887089346582f,-0.668198426203137f,-0.667151892993239f };
        float[] J6data = { 1.57079632679490f,1.56827922806195f,1.55219180210714f,1.51295739158170f,1.44491150554316f,1.34581279865458f,1.21635405038375f,1.05967314420239f,0.880864046785364f,0.686487787209924f,0.484083436154882f,0.281679085099839f,0.0873028255244002f,-0.0915062718926203f,-0.248187178073987f,-0.377645926344815f,-0.476744633233396f,-0.544790519271931f,-0.584024929797376f,-0.600112355752188f,-0.602629454485134f };
        StartCoroutine(RobotGo(J1data, J2data, J3data, J4data, J5data, J6data));
    }

    private void ModifyGrab(int grab)
    {
        GameObject end_eff = GameObject.Find("AnimationEE");
        ColliderTest end_eff_grab = end_eff.GetComponent<ColliderTest>();
        if (grab == 1)
        {
            end_eff_grab.GrabObj();
        }

        if (grab == 0)
        {
            end_eff_grab.ReleaseObj();
        }
    }

    IEnumerator RobotGo(float[] J1data, float[] J2data, float[] J3data, float[] J4data, float[] J5data, float[] J6data)
    {
        for (int i = 0; i < J1data.Length; i++)
        {
            J1.transform.localRotation = Quaternion.AngleAxis(-J1data[i] * 180f/ 3.14f, new Vector3(0, 1, 0));
            J2.transform.localRotation = Quaternion.AngleAxis(-(J2data[i]+3.14f/2) * 180f / 3.14f, new Vector3(1, 0, 0));
            J3.transform.localRotation = Quaternion.AngleAxis(J3data[i] * 180f / 3.14f, new Vector3(1, 0, 0));
            J4.transform.localRotation = Quaternion.AngleAxis(J4data[i] * 180f / 3.14f, new Vector3(0, 0, 1));
            J5.transform.localRotation = Quaternion.AngleAxis(J5data[i] * 180f / 3.14f, new Vector3(1, 0, 0));
            J6.transform.localRotation = Quaternion.AngleAxis(-J6data[i] * 180f / 3.14f, new Vector3(0, 1, 0));
            yield return new WaitForSeconds(0.1f);
        }

        if (red == 1 || green == 1 || blue == 1)
		{
            StartCoroutine(RobotGoBack(J1data, J2data, J3data, J4data, J5data, J6data));
        }
    }

    IEnumerator RobotGoBack(float[] J1data, float[] J2data, float[] J3data, float[] J4data, float[] J5data, float[] J6data)
    {        
        if (i == 0)
        {
            ModifyGrab(1);
            yield return new WaitForSeconds(3.7f);
        }
        if (i == 1)
        {
            ModifyGrab(0);
            yield return new WaitForSeconds(3.7f);
        }

        for (int i = 0; i < J1data.Length; i++)
        {
            J1.transform.localRotation = Quaternion.AngleAxis(-J1data[J1data.Length - i - 1] * 180f / 3.14f, new Vector3(0, 1, 0));
            J2.transform.localRotation = Quaternion.AngleAxis(-(J2data[J1data.Length - i - 1] + 3.14f / 2) * 180f / 3.14f, new Vector3(1, 0, 0));
            J3.transform.localRotation = Quaternion.AngleAxis(J3data[J1data.Length - i - 1] * 180f / 3.14f, new Vector3(1, 0, 0));
            J4.transform.localRotation = Quaternion.AngleAxis(J4data[J1data.Length - i - 1] * 180f / 3.14f, new Vector3(0, 0, 1));
            J5.transform.localRotation = Quaternion.AngleAxis(J5data[J1data.Length - i - 1] * 180f / 3.14f, new Vector3(1, 0, 0));
            J6.transform.localRotation = Quaternion.AngleAxis(-J6data[J1data.Length - i - 1] * 180f / 3.14f, new Vector3(0, 1, 0));
            yield return new WaitForSeconds(0.1f);
        }
        
        i++;
        if (i == 2)
        {
            red = 0;
            green = 0;
            blue = 0;
        }

        if (red == 1)
        {
            PutRed();
        }
        if (green == 1)
        {
            PutGreen();
        }
        if (blue == 1)
        {
            PutBlue();
        }
    }
}